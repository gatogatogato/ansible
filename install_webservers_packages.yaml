---
- hosts: webservers
  gather_facts: yes
  become: yes
  name: "Install stuff on web servers"
  tasks:
    - name: "Install a list of apt packages"
      ansible.builtin.apt:
        pkg:
        - apache2 
        - snapd
        - ddclient
        - hugo

    - name: "Install snap certbot"
      community.general.snap:
        name:
          - certbot

    - name: "Enable the apache2 module rewrite"
      community.general.apache2_module:
        state: present
        name: rewrite

    - name: "Enable the apache2 module ssl"
      community.general.apache2_module:
        state: present
        name: ssl